## 만약 물리 메모리만 존재했다면...

```
메모리 부족 상황에서 시스템이 죽지 않고 hang 현상이 발생하는 이유는 다음과 같습니다:

1. **운영체제의 메모리 관리 기능**: 대부분의 현대 운영체제는 메모리 부족 상황에서도 시스템을 유지하고, 최소한의 작업만을 계속 수행하려고 합니다. 이를 위해 운영체제는 메모리 관리 기능을 사용하여 우선 순위에 따라 프로세스를 종료하거나 메모리를 회수하여 필요한 프로세스에 할당합니다.
    
2. **가상 메모리 사용**: 많은 운영체제에서는 가상 메모리를 사용하여 메모리 부족 상황을 완화합니다. 가상 메모리를 사용하면 디스크 공간을 메모리로 사용하여 메모리 부족을 보완할 수 있습니다. 이를 통해 시스템이 계속해서 실행될 수 있습니다.
    
3. **프로세스 종료 및 자원 회수**: 운영체제는 메모리 부족 상황에서도 특정 프로세스를 종료하여 메모리를 회수할 수 있습니다. 이를 통해 필요한 자원을 확보하여 시스템의 안정성을 유지할 수 있습니다.
    

따라서, 메모리 부족 상황에서도 시스템이 죽지 않고 hang 현상이 발생하는 이유는 운영체제가 메모리 부족 상황을 관리하고, 필요한 조치를 취하여 시스템을 유지하려고 하기 때문입니다.
```

**가상메모리는 왜 태어났는가?**
- 예전 도스시절 하나의 프로그램만 실행시키던 그 때 프로그램이 메모리를 사용하다가 프로그램이 죽는경우 이 메모리를 회수시킬 방법이 없어 결국 OS를 재시작하게 되는 문제로부터 시작되었다고 한다..
- 즉, 프로세스가 운영체제(시스템) 전체에 문제가 나는것을 막기 위해
- 프로세스가 사용하는 공간을 가상세계로 범위를 제한시켜 애플리케이션이 죽어도 OS는 살아남는다. (시스템 안정성을 위해)

ref) https://dding9code.tistory.com/100


프로세스 마다 가상메모리에 공간이 할당된다?


## 가상 메모리와 물리 메모리의 Swap-in/out 차이

```
1. **가상 메모리에서의 스왑인 및 스왑아웃**:
    
    - **스왑인**: 디스크에 저장된 데이터를 가상 메모리로 로드합니다. 스왑인은 주로 페이지 부재가 발생한 경우에 발생하며, 필요한 페이지가 디스크에 있는 경우에 이를 메모리로 로드하여 사용합니다.
    - **스왑아웃**: 가상 메모리에 있는 데이터를 디스크로 저장합니다. 스왑아웃은 메모리가 부족한 경우에 발생하며, 더 이상 필요하지 않은 페이지를 디스크로 이동하여 메모리를 확보합니다.
2. **물리 메모리에서의 스왑인 및 스왑아웃**:
    
    - **스왑인**: 디스크에 저장된 데이터를 물리 메모리로 로드합니다. 스왑인은 물리 메모리가 부족한 경우에 발생하며, 필요한 데이터를 디스크에서 메모리로 로드하여 사용합니다.
    - **스왑아웃**: 물리 메모리에 있는 데이터를 디스크로 저장합니다. 스왑아웃은 물리 메모리가 부족한 경우에 발생하며, 더 이상 필요하지 않은 데이터를 디스크로 이동하여 메모리를 확보합니다.
```

```
1. **물리 메모리와 가상 메모리 사이의 Swap-in/out**: 이 경우는 메모리 부족 상황에서 물리 메모리와 가상 메모리 사이에서 데이터가 이동하는 것을 의미합니다. 가상 메모리에 있는 데이터를 물리 메모리로 로드하여 사용하거나, 물리 메모리에 있는 데이터를 가상 메모리로 Swap-out하여 공간을 확보하는 작업이 여기에 해당합니다.
    
2. **가상 메모리와 디스크 사이의 Swap-in/out**: 이 경우는 주로 디스크의 스왑 공간과 가상 메모리 사이에서 데이터가 이동하는 것을 의미합니다. 메모리 부족 상황에서 가상 메모리에 있는 데이터를 디스크로 Swap-out하여 메모리를 확보하거나, 디스크에 있는 데이터를 가상 메모리로 Swap-in하여 사용하는 작업이 여기에 해당합니다.
```

주메모리(DDR 1 ~ 3)와 보조메모리([HDD](https://namu.wiki/w/HDD "HDD"), [eMMC](https://namu.wiki/w/eMMC "eMMC"), [USB 메모리](https://namu.wiki/w/USB%20%EB%A9%94%EB%AA%A8%EB%A6%AC "USB 메모리"))의 속도 차이가 심하게 나던 시절에는 스왑에 사용된 보조 메모리가 병목 현상을 일으켜 시스템 성능을 심각하게 저하시키는 경우가 많았기 때문에 가상 메모리나 [스왑](https://namu.wiki/w/%EC%8A%A4%EC%99%91 "스왑") 기능을 아예 끄는 것이 추천되기도 했다. 그러나 현대의 보조메모리는 속도가 비약적으로 발전해([NVMe](https://namu.wiki/w/NVMe "NVMe"), [UFS](https://namu.wiki/w/UFS "UFS")) 병목 현상을 일으킬 우려가 적으므로 현재는 대부분의 시스템이 스와핑 기능을 적극 활용하고 있다.