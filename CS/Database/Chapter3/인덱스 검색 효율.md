
- [ ] 버퍼 Pinning에 대하여 알아보기

#### 클러스터링 팩터(CF, 군집성 계수)

특정 컬럼을 기준으로 같은 값을 갖는 데이터가 서로 모여있는 정도를 의미한다.

CF가 좋은 컬럼에 생성한 인덱스는 검색 효율이 매우 좋다.

예를 들자면, (직업 = '개발자')에 해당하는 데이터들이 물리적으로 근접해있으면
데이터가 흩어져있을 때보다 검색 속도가 빠르다.

아래의 그림은 CF가 가장 좋은 형태를 도식화한 것이다.
- 인덱스 레코드와 테이블 레코드 정렬 순서가 100% 일치한다.

![[Pasted image 20231126211306.png|500]]

이와 대비되는, CF가 가장 좋지 않은 형태는 다음과 같다.

![[Pasted image 20231126211621.png|500]]


#### 왜 그런 것일까?

인덱스 검색 효율이 좋다는 것은, 테이블 액세스량에 비해 블록 I/O가 적게 발생한다는 것이다.

디스크 DB에서는 어렵게 찾아간 테이블 블록에 대한 **포인터**를 바로 해제하지 않고 유지한다.
- 이를 **[[버퍼 Pinning]]** 이라고 한다.

다음 인덱스를 읽었는데, 마침 직전과 같은 테이블 블록을 가리킨다.

직전의 테이블 블록은 버퍼 Pinning 되었기 때문에
Disk I/O는 물론, 래치 획득, 해시 체인 스캔 과정까지 생략하고 바로 테이블 블록을 읽을 수 있다.

논리적인 블록 I/O 과정을 생략할 수 있는 것이다.

아래의 사진에서 굵은 실선만 실제 블록 I/O가 발생하는 경우이다.

![[Pasted image 20231126212240.png|500]]

