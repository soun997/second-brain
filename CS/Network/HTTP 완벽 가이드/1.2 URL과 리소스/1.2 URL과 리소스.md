# 2장 URL과 리소스

### URL이란?

- URI (Uniform Resource Identifier, 통합 자원 식별자)의 부분집합.  
    - URI에는 URL, URN이 있다
- **URL은 리소스가 어디 있는지 설명해서 리소스를 식별한다.**  
    - (한계점) 리소스를 찾는데 필요한 포트와 서버 이름을 제공하고, 특정 시점에 어떤 것이 위치한 곳을 알려주기 때문에 **리소스가 옮겨지면 URL을 더는 사용할 수 없다.**  
    - 이러한 한계점이 있기 때문에 URN이 만들어졌다. **URN**은 객체의 위치와 상관없이 그 객체를 가리키는 실제 객체의 이름을 사용한다. **객체가 옮겨지더라도 (웹서버 내, 웹서버 간 모두) 항상 객체를 가리킬 수 있다.**

Uniform Resource Locator, 인터넷 리소스를 가리키는 표준 이름이다.  
브라우저가 정보를 찾는데 필요한 리소스의 위치를 가리킨다.

`http://www.joes-hardware.com/seasonal/index-fall.html`

- URL의 첫 부분인 HTTP는 URL의 스킴이다. 스킴은 웹 클라이언트가 리소스에 어떻게 접근하는지 알려준다.
- URL의 두 번째 부분인 www.joes-hardware.com은 서버의 위치다. 이는 웹 클라가 리소스가 어디에 호스팅 되어 있는지 알려준다.
- URL의 세 번째 부분인 /seasonal/index-fall.html은 리소스의 경로다. 서버에 존재하는 로컬 리소스들 중에서 요청받은 리소스가 무엇인지 알려준다.

물론 HTTP 프로토콜이 아닌 다른 가용한 프로토콜을 사용할 수도 있다. (FTP..)

## 📌 URL 문법

대부분의 URL 스킴의 문법은 일반적으로 9개 부분으로 나뉜다.  
차례대로 살펴보자.

### 1. 스킴: 사용할 프로토콜

주어진 리소스에 어떻게 접근하는지 알려주는 중요한 정보다. URL을 해석하는 애플리케이션이 어떤 프로토콜을 사용하여 리소스를 요청해야 하는지 알려준다.  
`http`가 스킴이다.

### 2. 호스트와 포트

URL의 호스트와 포트 컴포넌트는 리소스를 호스팅하고 있는 장비(호스트명 또는 IP주소)와 그 장비 내에서 리소스에 접근할 수 있는 서버가 어디에 있는지 알려준다.

### 3. 사용자 이름과 비밀번호

많은 서버가 자신이 가지고 있는 데이터에 접근을 허용하기 전에 사용자 이름과 비밀번호를 요구한다.  
`@`문자로 URL로부터 사용자 이름과 비밀번호 컴포넌트를 분리한다.  
사용자 이름과 비밀번호를 `:`문자로 분리한다.  
`ftp://anonymous:my_password@ftp.perp.ai.mit.edu/pub/gnu`

### 4. 경로

서버가 리소스의 위치를 찾는데 사용하는 정보다.  
`http://www.something.com:80/seasonal/index-fall.html`  
위 주소에서 `/seasonal/index-fall.html` 가 URL의 경로가 된다.

### 5. 파라미터

많은 프로토콜이 리소스에 접근하기 위해서 사용자 이름 및 비밀번호 외에도 많은 정보를 요구한다.  
URL의 파라미터 컴포넌트는, 애플리케이션이 서버에 정확한 요청을 하기 위해 필요한 입력 파라미터를 받는데 사용한다.  
`;` 문자로 구분하며 `이름/값` 쌍의 리스트 형태를 띈다.  
`http://www.joes-hardware.com/hammers;sale=false/index.html;graphics=true`

### 6. 질의 문자열

데이터베이스 같은 서비스들은 리소스 형식의 범위를 좁히기 위해서 질문이나 질의를 받을 수 있다. 물음표의 우측에 값이 들어오며,  
`http://www.joes-hardware.com/inventory-check.cgi?item=12731`  
제품번호가 12731!

### 7. 프래그먼트

리소스의 특정 부분을 가리킬 수 있도록,URL은 리소스 내의 조각을 가리킬 수 있는 프래그먼트 컴포넌트를 제공한다. 예를 들어 URL은 html 문서에 있는 특정 이미지나 일부분을 가리킬 수 있다. URL의 오른쪽에 `#`문자에 이어서 온다.  
`http://www.joes-hardware.com/tools.html#drills`

## 📌 단축 URL

웹 클라이언트는 몇몇 단축 URL을 인식하고 사용한다. 상대 URL은 리소스 안에 있는 리소스를 간결하게 기술하는데 사용할 수 있다.

### 상대 URL

URL은 `상대 URL`과 `절대 URL`로 나뉜다. 현재까지 우리가 다룬 것은 절대 URL뿐이다.  
절대 URL은 리소스에 접근하는데 필요한 모든 정보를 가지고 있다.  
그에 반해 상대 URL은 모든 정보를 담고 있지는 않다. URL을 **짧게 표기**하는 방식이다.

🧐절대 URL  
`http://www.joes-hardware.com/tools.html`  
🧐기저 URL  
`http://www.joes-hardware.com/`  
🧐상대 URL  
`./hammers.html`

> #### 기저 URL
> 
> 상대 URL의 기준이 된다.


## URL 확장

브라우저 주소창에 url을 입력하고 있는 동안 URL이 자동으로 완성되는 경험을 해본 적이 분명 있을 것이다 ... 그것에 대한 이야기다. 브라우저가 사용하는 기술!

- 호스트 명 확장 : 입력한 호스트 명을 전체 호스트 명으로 확장!  
    ex) yahoo를 입력 -> www.yahoo.com으로 자동완성! 또는 가능성 있는 몇가지 URL 제시 (www.yahoo.gg, www.yahoo.co.kr)
- 히스토리 확장 : 과거 사용자가 방문해놓은 URL의 기록을 저장하여 URL 일부를 입력하면 완결된 형태의 URL들을 사용할 수 있게 해준다.
    
    > 주의! 프락시를 사용할 경우 이러한 URL기능은 다르게 동작할 수 있다는 것을 유념해야한다. 6장의 'URI 클라이언트 자동 확장과 호스트명 분석'에서 상세히 다룰 것이라고 한다. 참고하시길.
    

## 안전하지 않은 문자

정보가 유실될 위험 없이 URL을 전송하는 것이 바로 `안전한 전송`. SMTP같은 프로토콜은 특정 문자를 제거할 수도 있는 전송방식을 사용하는데, 이러한 일을 방지하고자 URL에 일반적으로 알파벳 문자만 포함하도록 허락된다.  
URL에 이진데이터 또는 알파벳 외의 문자를 포함해야하는 경우도 있기 때문에 **이스케이프**라는 기능으로 안전하지 않은 문자를 안전한 문자로 인코딩할 수 있게 하였다. (가끔 URL을 보면 있던 %7%20... 요런 것들이 떠오를 것이다.)

#### 이스케이프 문자열

URL에 **허락되지 않은 문자 (US-ASCII가 지원하지 않는 문자)**와 **이진 데이터를 포함시켜야하는 경우** 이스케이프 문자열을 사용하여 이들을 **인코딩**시킬 수 있도록 하여 이동성과 URL의 완성도를 높였다.

- 인코딩 체계 : 안전하지 않은 문자를 `%`로 시작해 ASCII 코드로 표현되는 두 개의 16진수 숫자로 이루어진 `이스케이프`문자로 바꾼다.
- URL내에서 특별한 의미로 예약되어 있거나, 몇몇 프로토콜에서 혼동되는 것으로 알려진 문자들은 본래의 목적이 아닌 다른 용도로 사용하려는 경우 반드시 인코딩이 필요하다.![](https://images.velog.io/images/warmwhiten/post/c702712f-9f9a-4bfc-a559-5d7d34abb2b3/KakaoTalk_Photo_2021-07-11-23-31-44.jpeg)

#### 좀 더 알아보기

왠지 URL에 한글이 들어간 경우를 본 적 있는 것 같지 않은가..? 나도다! 어떤 전송 프로토콜에서는 이것이 별 문제가 되지 않기도 하지만.... **사실 애플리케이션 개발자들이 안전하지 않은 문자를 인코딩하지 않는 것은 실수라고 한다!**

### 스킴의 바다

아래 스킴이 무엇인지는... 궁금하다면 직접 알아보자! ~~(http, https말고는 쓸 일이 없지 않을까)~~

- http
- https
- malito
- ftp
- rtsp, rtspu
- file
- news
- telnet